107-2 大數據分析方法 作業一
================
許雲翔 B0444144

搞不清楚各行各業的薪資差異嗎? 念研究所到底對第一份工作的薪資影響有多大? CP值高嗎? 透過分析**初任人員平均經常性薪資**-
[開放資料連結](https://data.gov.tw/dataset/6647)，可初步了解台灣近幾年各行各業、各學歷的起薪。

## 比較103年度和106年度大學畢業者的薪資資料

### 資料匯入與處理

``` r
library(readr)
library(dplyr)
library(magrittr)
library(data.table)
library(knitr)

f103 = read_csv('103.csv')
f104 = read_csv('104.csv')
f105 = read_csv('105.csv')
f106 = read_csv('106.csv')

f103 %<>% select(class = "大職業別", US103 = "大學-薪資", UG103 = "大學-女/男",
              MS103 = "研究所及以上-薪資", MG103 = "研究所及以上-女/男")
f104 %<>% select(class = "大職業別", US104 = "大學-薪資", UG104 = "大學-女/男",
              MS104 = "研究所及以上-薪資", MG104 = "研究所及以上-女/男")
f105 %<>% select(class = "大職業別", US105 = "大學-薪資", UG105 = "大學-女/男",
              MS105 = "研究所及以上-薪資", MG105 = "研究所及以上-女/男")
f106 %<>% select(class = "大職業別", US106 = "大學-薪資", UG106 = "大學-女/男",
              MS106 = "研究所及以上-薪資", MG106 = "研究所及以上-女/男")

f106$class <- gsub('_','、',f106$class)

data = full_join(f103, f104, by = "class")
data = full_join(data, f105, by = "class")
data = left_join(data, f106, by = "class")
Sys.setlocale(locale = "us")
```

    ## [1] "LC_COLLATE=English_United States.1252;LC_CTYPE=English_United States.1252;LC_MONETARY=English_United States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252"

``` r
data[,2:17] <- apply(data[,2:17],2,as.numeric)
Sys.setlocale(locale = "cht")
```

    ## [1] "LC_COLLATE=Chinese (Traditional)_Taiwan.950;LC_CTYPE=Chinese (Traditional)_Taiwan.950;LC_MONETARY=Chinese (Traditional)_Taiwan.950;LC_NUMERIC=C;LC_TIME=Chinese (Traditional)_Taiwan.950"

在閱讀完題目後，確認需要的資料欄僅有大學及研究所以上和職業別的部分，因此在讀取完資料後，僅留下需要的資料且改名方便後面取用。
然後再合併資料表時發現106年的職業別與之前有幾筆有有"\_“和”、"的差異，因此改成與前幾年相同，方便整合。
然後將資料表合併，最後把資料型態改成數值。

### 106年度薪資較103年度薪資高的職業有哪些?

``` r
data1 = data.table(data)
data1 = data1[US106>US103,.(class,raise_rate=(((US106-US103)/US103)*100))]
kable(head(data1$class[order(data1$raise_rate,decreasing = TRUE)],10),col.names = "")
```

|                       |
| :-------------------- |
| 其他服務業-技術員及助理專業人員      |
| 住宿及餐飲業-服務及銷售工作人員      |
| 用水供應及污染整治業-技術員及助理專業人員 |
| 專業、科學及技術服務業-專業人員      |
| 其他服務業-技藝、機械設備操作及組裝人員  |
| 營造業-服務及銷售工作人員         |
| 其他服務業-專業人員            |
| 資訊及通訊傳播業-專業人員         |
| 不動產業-專業人員             |
| 教育服務業-事務支援人員          |

把資料轉為data.table的形式，然後選出有成長的職業病增加成長率的欄位，且進一步的把多餘的欄位篩除，傳回答案。 大部分都是服務業。

### 提高超過5%的的職業有哪些?

``` r
data2 = data1[raise_rate>5,.(class, raise_rate)]
kable(data2$class,col.names = "")
```

|                            |
| :------------------------- |
| 工業及服務業部門-專業人員              |
| 工業部門-專業人員                  |
| 礦業及土石採取業-技藝、機械設備操作及組裝人員    |
| 製造業-專業人員                   |
| 電力及燃氣供應業-服務及銷售工作人員         |
| 電力及燃氣供應業-技藝、機械設備操作及組裝人員    |
| 用水供應及污染整治業                 |
| 用水供應及污染整治業-專業人員            |
| 用水供應及污染整治業-技術員及助理專業人員      |
| 用水供應及污染整治業-事務支援人員          |
| 用水供應及污染整治業-服務及銷售工作人員       |
| 用水供應及污染整治業-技藝、機械設備操作及組裝人員  |
| 營造業-專業人員                   |
| 營造業-事務支援人員                 |
| 營造業-服務及銷售工作人員              |
| 服務業部門                      |
| 服務業部門-專業人員                 |
| 服務業部門-技術員及助理專業人員           |
| 服務業部門-事務支援人員               |
| 服務業部門-技藝、機械設備操作及組裝人員       |
| 運輸及倉儲業                     |
| 運輸及倉儲業-技術員及助理專業人員          |
| 運輸及倉儲業-事務支援人員              |
| 運輸及倉儲業-技藝、機械設備操作及組裝人員      |
| 住宿及餐飲業                     |
| 住宿及餐飲業-技術員及助理專業人員          |
| 住宿及餐飲業-服務及銷售工作人員           |
| 住宿及餐飲業-技藝、機械設備操作及組裝人員      |
| 資訊及通訊傳播業                   |
| 資訊及通訊傳播業-專業人員              |
| 資訊及通訊傳播業-技術員及助理專業人員        |
| 資訊及通訊傳播業-事務支援人員            |
| 資訊及通訊傳播業-服務及銷售工作人員         |
| 金融及保險業-事務支援人員              |
| 不動產業-專業人員                  |
| 專業、科學及技術服務業                |
| 專業、科學及技術服務業-專業人員           |
| 專業、科學及技術服務業-技術員及助理專業人員     |
| 專業、科學及技術服務業-服務及銷售工作人員      |
| 專業、科學及技術服務業-技藝、機械設備操作及組裝人員 |
| 支援服務業-技術員及助理專業人員           |
| 支援服務業-服務及銷售工作人員            |
| 支援服務業-技藝、機械設備操作及組裝人員       |
| 教育服務業                      |
| 教育服務業-專業人員                 |
| 教育服務業-技術員及助理專業人員           |
| 教育服務業-事務支援人員               |
| 教育服務業-服務及銷售工作人員            |
| 醫療保健服務業-技術員及助理專業人員         |
| 醫療保健服務業-技藝、機械設備操作及組裝人員     |
| 藝術、娛樂及休閒服務業                |
| 藝術、娛樂及休閒服務業-事務支援人員         |
| 藝術、娛樂及休閒服務業-技藝、機械設備操作及組裝人員 |
| 其他服務業                      |
| 其他服務業-專業人員                 |
| 其他服務業-技術員及助理專業人員           |
| 其他服務業-事務支援人員               |
| 其他服務業-技藝、機械設備操作及組裝人員       |

上一步已經算完成長率了，所以取出來就好了。 太多資料了，還需要進一步整理才好看出結果。

### 主要的職業種別是哪些種類呢?

``` r
main.class = function(x){
  temp = strsplit(x,'-')
  x = temp[[1]][1]
  return(x)
}
data2$class = sapply(data2$class,main.class)
kable(table(data2$class),col.names = c("職業別","數量"))
```

| 職業別         | 數量 |
| :---------- | :-: |
| 工業及服務業部門    | 1  |
| 工業部門        | 1  |
| 不動產業        | 1  |
| 支援服務業       | 3  |
| 用水供應及污染整治業  | 6  |
| 住宿及餐飲業      | 4  |
| 其他服務業       | 5  |
| 服務業部門       | 5  |
| 金融及保險業      | 1  |
| 專業、科學及技術服務業 | 5  |
| 教育服務業       | 5  |
| 資訊及通訊傳播業    | 5  |
| 運輸及倉儲業      | 4  |
| 電力及燃氣供應業    | 2  |
| 製造業         | 1  |
| 營造業         | 3  |
| 醫療保健服務業     | 2  |
| 藝術、娛樂及休閒服務業 | 3  |
| 礦業及土石採取業    | 1  |

取’-’號前面的字串，然後算數量 工業、不動產、金融保險業、製造業、礦業的成長偏低，都僅有一個項目有超過5%。
意外的是不動產維一個個超過5%成長的是在成長的前十名裡面。

## 男女同工不同酬現況分析

男女同工不同酬一直是性別平等中很重要的問題，分析資料來源為103到106年度的大學畢業薪資。

### 103到106年度的大學畢業薪資資料，哪些行業男生薪資比女生薪資多?

``` r
#
```

### 哪些行業女生薪資比男生薪資多?

``` r
#
```

資料表內並沒有分列男女的薪資，裡面的男女是該職業的性別比，基本上沒辦法算男女薪資差異，所以我做了性別比的評估，然後這個性別比的計算是用女/男，不知道是在算甚麼。

``` r
data5 = data.table(data)
data5 = data5[,.(class,UG103,UG104,UG105,UG106)]
```

### 那些行業的性別比(女/男)大於等於100

``` r
kable(data5[UG103>=100|UG104>=100|UG105>=100|UG106>=100],col.names = c("職業別","103","104","105","106"))
```

| 職業別                        |    103 |    104 |    105 |    106 |
| :------------------------- | -----: | -----: | -----: | -----: |
| 礦業及土石採取業-技術員及助理專業人員        | 100.00 |  92.42 |  99.48 | 100.00 |
| 礦業及土石採取業-服務及銷售工作人員         |  92.57 |     NA | 100.00 |     NA |
| 用水供應及污染整治業-服務及銷售工作人員       | 100.00 | 100.00 | 100.00 | 100.00 |
| 營造業-服務及銷售工作人員              | 100.00 |  97.65 |     NA |  95.93 |
| 資訊及通訊傳播業-服務及銷售工作人員         |  98.79 |  99.59 |  97.05 | 100.33 |
| 資訊及通訊傳播業-技藝、機械設備操作及組裝人員    |  97.47 |  96.84 |  96.64 | 100.00 |
| 金融及保險業-專業人員                |  99.91 |  99.28 | 100.11 |  99.47 |
| 金融及保險業-技藝、機械設備操作及組裝人員      |  98.58 |  98.32 |  99.89 | 100.00 |
| 不動產業-專業人員                  |  99.59 |  98.63 |  99.70 | 100.00 |
| 不動產業-服務及銷售工作人員             |  99.22 |  99.74 |  96.68 | 100.00 |
| 不動產業-技藝、機械設備操作及組裝人員        |  99.06 | 100.00 |  91.38 | 100.00 |
| 專業、科學及技術服務業-技藝、機械設備操作及組裝人員 |  97.67 | 100.26 |  99.83 | 100.00 |
| 教育服務業-服務及銷售工作人員            |  98.15 |  91.90 | 100.00 |  97.53 |
| 醫療保健服務業-服務及銷售工作人員          |  99.86 | 100.00 |  99.74 |  99.88 |
| 醫療保健服務業-技藝、機械設備操作及組裝人員     |  99.34 |  99.56 | 100.00 |  98.60 |
| 藝術、娛樂及休閒服務業-技術員及助理專業人員     |  98.17 |  97.52 | 100.00 |  98.89 |
| 其他服務業-專業人員                 |  99.13 | 100.00 |  99.46 |     NA |

``` r
count(data5[!is.na(UG106)])
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1   115

四年間性別比有大於100的總共只有17個項目，106年只有9個，而不為空值得有115個，可見大部分的職業都還是男生較多。

### 那些行業的性別比(女/男)小於等於95

``` r
kable(data5[UG103<=95|UG104<=95|UG105<=95|UG106<=95],col.names = c("職業別","103","104","105","106"))
```

| 職業別                     |    103 |    104 |    105 |    106 |
| :---------------------- | -----: | -----: | -----: | -----: |
| 礦業及土石採取業-技術員及助理專業人員     | 100.00 |  92.42 |  99.48 | 100.00 |
| 礦業及土石採取業-服務及銷售工作人員      |  92.57 |     NA | 100.00 |     NA |
| 礦業及土石採取業-技藝、機械設備操作及組裝人員 |  84.97 |  93.10 |  99.18 |  96.91 |
| 電力及燃氣供應業-技藝、機械設備操作及組裝人員 |  91.77 |  91.69 |  98.20 |  95.51 |
| 不動產業-技藝、機械設備操作及組裝人員     |  99.06 | 100.00 |  91.38 | 100.00 |
| 教育服務業-服務及銷售工作人員         |  98.15 |  91.90 | 100.00 |  97.53 |
| 教育服務業-技藝、機械設備操作及組裝人員    |  88.49 |     NA |     NA |     NA |
| 醫療保健服務業-專業人員            |  98.32 |  98.20 |  94.98 |  98.76 |
| 其他服務業-技術員及助理專業人員        |  89.36 |  98.94 |  99.37 |  96.84 |

而小於95的只有9筆，且都不是後兩年的紀錄，所以大部分的性別筆都還是落在95\~100之間。

## 研究所薪資差異

以106年度的資料來看，哪個職業別念研究所最划算呢 (研究所學歷薪資與大學學歷薪資增加比例最多)?

``` r
data3 = data.table(data)
data3 = data3[!is.na(MS106)&!is.na(US106),.(class,raise_rate = ((MS106-US106)/US106)*100)]
data3 = data3[order(raise_rate,decreasing = T)]
kable(head(data3,10),col.names = c("職業別","成長率"))
```

| 職業別                |   成長率    |
| :----------------- | :------: |
| 礦業及土石採取業-事務支援人員    | 20.89462 |
| 專業、科學及技術服務業        | 20.29817 |
| 其他服務業-技術員及助理專業人員   | 19.94701 |
| 專業、科學及技術服務業-事務支援人員 | 19.23063 |
| 批發及零售業             | 19.19163 |
| 製造業                | 18.83502 |
| 藝術、娛樂及休閒服務業-事務支援人員 | 18.77052 |
| 工業部門               | 18.34554 |
| 工業及服務業部門           | 18.23455 |
| 服務業部門              | 18.13338 |

此處資料缺失很多，140筆資料去掉有遺漏值的只剩80筆。
前4皆為技術專業人員；然後專業、科學及技術服務業的主項目和事務支援人員都在前10，只看這10筆的話可以推測事務支援人員是該項目的主要人員。而事務支援人員佔了3名，可見做資料處理的人員擁有更高學歷對薪資的提升更為顯著。

## 我有興趣的職業別薪資狀況分析

### 有興趣的職業別篩選，呈現薪資

``` r
data4 = data.table(data)
data4 = data4[c(79:81,100:102),.(class,US106,MS106,raise=(MS106-US106),raise_rate=(MS106-US106)/US106*100)]
kable(data4[,.(class,US106,MS106)],col.names = c("職業別","大學畢業薪資","研究所以上薪資"))
```

| 職業別                    | 大學畢業薪資 | 研究所以上薪資 |
| :--------------------- | :----: | :-----: |
| 資訊及通訊傳播業-專業人員          | 31817  |  36545  |
| 資訊及通訊傳播業-技術員及助理專業人員    | 28902  |  32354  |
| 資訊及通訊傳播業-事務支援人員        | 27156  |  30856  |
| 專業、科學及技術服務業-專業人員       | 33384  |  38415  |
| 專業、科學及技術服務業-技術員及助理專業人員 | 29016  |  33829  |
| 專業、科學及技術服務業-事務支援人員     | 27035  |  32234  |

兩邊的起薪都比我預期的還要低

### 這些職業別研究所薪資與大學薪資差多少呢？

``` r
kable(data4[,.(class,raise,raise_rate)],col.names = c("職業別","成長金額","成長率"))
```

| 職業別                    | 成長金額 |   成長率    |
| :--------------------- | :--: | :------: |
| 資訊及通訊傳播業-專業人員          | 4728 | 14.85998 |
| 資訊及通訊傳播業-技術員及助理專業人員    | 3452 | 11.94381 |
| 資訊及通訊傳播業-事務支援人員        | 3700 | 13.62498 |
| 專業、科學及技術服務業-專業人員       | 5031 | 15.07009 |
| 專業、科學及技術服務業-技術員及助理專業人員 | 4813 | 16.58740 |
| 專業、科學及技術服務業-事務支援人員     | 5199 | 19.23063 |

``` r
print(paste0("平均增加薪資：",round(mean(data4$raise),2)))
```

    ## [1] "平均增加薪資：4487.17"

平均增加了4500元左右，算是非常誘人的數字，但這前面還得再多付出至少兩年的學費和時間，並不會讓我想要去讀研究所。
